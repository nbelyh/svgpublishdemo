$(document).ready(function(){function i(t,i){var r=n.layers.filter(function(n){return n.Name===t})[0],u;r&&(u=parseInt(r.Index),$.each(n.shapes,function(n,t){if(t.Layers&&!(t.Layers.indexOf(u)<0)){var r=$("#"+n);i?r.show():r.hide()}}))}var n=window.svgpublish||{},t;n.layers&&n.enableLayers&&($("#shape-layers").show(),n.setLayerVisible=function(t,i){n.isLayerVisible(t)!==i&&$("#panel-layers").find("input[data-layer='"+t+"']").bootstrapSwitch("state",i)},t=$("<table class='table borderless' />"),$.each(n.layers,function(r,u){var f=$("<input type='checkbox' data-layer='"+u.Name+"' checked><span style='margin-left:1em'>"+u.Name+"<\/span><\/input>");f.on("change.bootstrapSwitch",function(t){var r=$(t.target).data("layer");i(r,!n.isLayerVisible(r))});t.append($("<tr>").append($("<td>").append(f)))}),$("#panel-layers").html(t),$("#panel-layers").find("input").bootstrapSwitch({size:"small",labelWidth:0}),n.isLayerVisible=function(n){return!!$("#panel-layers").find("input[data-layer='"+n+"']").bootstrapSwitch("state")})});$(document).ready(function(){function t(t){return t.Address?t.Address:t.PageId>=0&&n.pages?document.location.href.replace("__"+n.currentPage.Id,"__"+t.PageId):"#"}function r(n){return n.Description?n.Description:n.SubAddress?n.Address?n.Address+"["+n.SubAddress+"]":n.SubAddress:n.Address}function u(i){var f=n.shapes[i],u=$("<span>No Links<\/span>"),e;f&&(u=$("<table class='table borderless' />"),e=u.append($("<tbody />")),$.each(f.Links,function(i,u){var o=t(u),s=r(u),f=$("<a />").attr("href",o).text(s);u.Address&&n.openHyperlinksInNewWindow&&f.attr("target","_blank");e.append($("<tr />").append($("<td />").append(f)))}));$("#panel-links").html(u)}var n=window.svgpublish||{},i=SVGFEColorMatrixElement&&SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE===2;n.shapes&&($("#shape-links").show(),n.enableLinks&&n.selectionChanged.add(u),n.enableFollowHyperlinks)&&$.each(n.shapes,function(r){var u=$("#"+r);u.css("cursor","pointer");u.on("click",function(i){var e,r,f,u;(i.stopPropagation(),i&&i.ctrlKey)||(e=$(this).attr("id"),r=n.shapes[e],r.DefaultLink&&(f=r.Links[r.DefaultLink-1],u=t(f),u&&(f.Address&&n.openHyperlinksInNewWindow||i.shiftKey?window.open(u,"_blank"):document.location=u)))});if(i){u.on("mouseover",function(){var t=$(this).attr("id");n.shapes[t].DefaultLink&&$(this).attr("filter","url(#hyperlink)")});u.on("mouseout",function(){var t=$(this).attr("id");n.shapes[t].DefaultLink&&$(this).removeAttr("filter")})}})});$(document).ready(function(){function t(t){var i=$('<ul class="nav nav-stacked nav-pills"/>');$.each(n.pages,function(r,u){var f=new RegExp("("+t.replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")+")","gi");if(!t||f.test(u.Name)){var o=document.location.href.replace("__"+n.currentPage.Id,"__"+u.Id),s=t?u.Name.replace(f,"<span class='search-hilight'>$1<\/span>"):u.Name,h=$("<a />").attr("href",o).html(s),e=$("<li />");u.Id===n.currentPage.Id&&e.addClass("active");e.append(h).appendTo(i)}});$("#panel-pages").html(i)}var n=window.svgpublish||{};if(n.pages&&n.enablePages){$("#shape-pages").show();t("");$("#search-page").on("keyup",function(){return t($("#search-page").val()),!1})}});$(document).ready(function(){function t(t){var r=n.shapes[t],i=$("<span>No Shape Data<\/span>"),u,f;r&&(i=$("<table class='table table-bordered table-striped' />"),u=i.append($("<thead />")),f=i.append($("<tbody />")),u.append($("<tr />").append($("<th />").text("Property")).append($("<th />").text("Value"))),$.each(r.Props,function(n,t){t==null&&(t="");f.append($("<tr />").append($("<td />").text(n)).append($("<td />").text(t)))}));$("#panel-props").html(i)}var n=window.svgpublish||{};n.shapes&&n.enableProps&&($("#shape-props").show(),n.selectionChanged.add(t))});$(document).ready(function(){function r(t,r,u,f){$.each(n.searchIndex[r],function(e,o){var c=new RegExp("("+t.replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")+")","gi"),h,s,l;if(c.test(o)){h=$("<li />");s="";s+="<a>";f&&(l=n.pages.filter(function(n){return n.Id==r})[0],s+='<div class="text-muted small">',s+="(page "+l.Name+")",s+="<\/div>");s+="<div>";s+=o.replace(c,"<span class='search-hilight'>$1<\/span>");s+="<\/div>";s+="<\/a>";var a=$(s),v=f?i.replace("__"+n.currentPage.Id,"__"+r):i,y=v+"#?shape="+e+"&term="+encodeURIComponent(t);a.attr("href",y);h.append(a);h.appendTo(u)}})}function u(t){var i=$("<div />"),e,u,f;t.length&&(t.length<2?(e=$('<p class="text-muted">Please enter more than one character to search<\/p>'),i.append("<hr/>"),i.append(e)):(u=$('<ul class="nav nav-stacked nav-pills"/>'),i.append("<hr/>"),i.append("<p>Results for <strong>"+t+"<\/strong>:<\/p>"),i.append(u),f=n.currentPage.Id,r(t,f,u),$.each(n.searchIndex,function(n){n!=f&&r(t,n,u,!0)})));$("#panel-search-results").html(i)}function f(n){var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.hash);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}var n=window.svgpublish||{},i,t;if(n.shapes&&n.enableSearch){$("#shape-search").show();i=document.location.protocol+"//"+document.location.host+document.location.pathname;$("#search-term").on("keyup",function(){return u($("#search-term").val()),!1});t=f("term");t&&($("#search-term").val(t),u(t))}}),function(n){n.selectionChanged=$.Callbacks()}(window.svgpublish);$(document).ready(function(){function r(n){var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.hash);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}function i(){var t=r("shape");t&&n.highlightShape(t)}var n=window.svgpublish,t=SVGFEColorMatrixElement&&SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE===2;if(n.shapes&&n.enableSelection){n.setSelection=function(i){n.selectedShapeId&&n.selectedShapeId!==i&&(t?$("#"+n.selectedShapeId).removeAttr("filter"):$("#"+n.selectedShapeId).css("opacity",1),delete n.selectedShapeId);n.selectedShapeId&&n.selectedShapeId===i||(n.selectedShapeId=i,n.selectionChanged.fire(i),t?$("#"+i).attr("filter","url(#select)"):$("#"+i).css("opacity","0.5"))};$("div.svg").on("click",function(){n.setSelection()});$.each(n.shapes,function(i){var r=$("#"+i);r.css("cursor","pointer");r.on("click",function(t){t.stopPropagation();var i=$(this).attr("id");n.setSelection(i)});if(t){r.on("mouseover",function(){var t=$(this).attr("id");n.selectedShapeId===t||n.shapes[t].DefaultLink||$(this).attr("filter","url(#hover)")});r.on("mouseout",function(){var t=$(this).attr("id");n.selectedShapeId===t||n.shapes[t].DefaultLink||$(this).removeAttr("filter")})}});n.highlightShape=function(t){$("#"+t).fadeTo(300,.3).fadeTo(300,1).fadeTo(300,.3).fadeTo(300,1);n.setSelection(t)};i();$(window).on("hashchange",i)}});$(document).ready(function(){function a(){return f>600}function e(u,f){u?($("#diagram-sidebar").show().animate({width:n+"px"},f,function(){window.editor&&window.editor.layout&&window.editor.layout();window.terminal&&window.terminal.layout&&window.terminal.layout();i.enableSidebarHtml&&v()}),$("#sidebar-toggle").addClass("rotated").animate(r?{right:n-2+"px"}:{left:n-2+"px"},f)):($("#diagram-sidebar").animate({width:"0"},f,function(){$("#diagram-sidebar").hide()}),$("#sidebar-toggle").removeClass("rotated").animate(r?{right:"0"}:{left:"0"},f));a()&&t&&(t.setItem("DiagramSidebarVisible",u?"1":"0"),t.setItem("DiagramSidebarWidth",n))}function v(n){var t=n?i.shapes[n]:{},r=Mustache.render($("#sidebar-template").html(),t);$("#sidebar-html").html(r)}var i=window.svgpublish||{},r,n,t,o,f,l,s,u,h,c;if(i.enableSidebar){r=i.rightSidebar;$("body").addClass(r?"vp-sidebar-right":"vp-sidebar-left");n=400;$("#sidebar-toggle").on("dragstart",function(){return!1});try{t=window.localStorage}catch(y){}o=t?parseInt(t.getItem("DiagramSidebarWidth")):0;o>0&&(n=o);f=$(window).width()-$("#sidebar-toggle").width()-40;n>=f&&(n=f);l=t?t.getItem("DiagramSidebarVisible")=="1":0;$("#sidebar-toggle").show();a()&&e(l,0);h=function(n){if(u){var t=s+(r?-1:1)*(n.clientX-u);t<0&&(t=0);$("#diagram-sidebar").width(t+"px").show();$("#sidebar-toggle").css(r?"right":"left",t+"px")}};c=function(t){$("iframe").css("pointer-events","auto");$(document).off("mousemove",h);$(document).off("mouseup",c);var i=(r?-1:1)*(t.clientX-u)+s;i<0&&(i=0);Math.abs(t.clientX-u)<20?e(i<20,400):(n=i,e(!0,0));u=null};$("#sidebar-toggle").on("mousedown",function(n){if(n.button===0){$("iframe").css("pointer-events","none");u=n.clientX;s=$("#diagram-sidebar").width();$(document).on("mousemove",h).on("mouseup",c)}});i.showSidebar=e;i.enableSidebarHtml&&i.selectionChanged.add(v)}}),function(n){n.fn.extend({panzoom:function(n){return this.each(function(){t(this,n)})}});var t=function(t,i){function ut(n,t,i,r){var u=n/t;return(n>i||t<r)&&(n=i,t=Math.floor(n/u)),(t>r||n<i)&&(t=r,n=Math.floor(t*u)),{width:n,height:t}}function s(){return n(t).find("#viewport").get(0)}function d(){var i,u,h;if(k){var o=k.split(" "),s=parseFloat(o[2]),l=parseFloat(o[3]),f=n(t).width(),e=n(t).height();typeof r.createSVGMatrix=="function"&&(i=r.createSVGMatrix(),u=ut(s,l,f,e),u.width<f&&(i=i.translate((f-u.width)/2,0)),u.height<e&&(i=i.translate(0,(e-u.height)/2,0)),i=i.scale(u.width/s),h=n(r).find("#viewport").get(0),c(h,i))}}function w(n){var t=n.originalEvent.touches,i,r,u;return t&&t.length===2?(i=e(t[0].pageX,t[0].pageY),r=e(t[1].pageX,t[1].pageY),e((i.pageX+r.pageX)/2,(i.pageY+r.pageY)/2)):(u=n.originalEvent?n.originalEvent.touches?n.originalEvent.touches[0]:n.originalEvent:n,e(u.pageX,u.pageY))}function h(i){var u=r.createSVGPoint();return u.x=i.pageX-n(t).offset().left,u.y=i.pageY-n(t).offset().top,u}function ft(){var i=r.createSVGPoint();return i.x=n(t).width()/2,i.y=n(t).height()/2,i}function c(n,i){var u="matrix("+i.a+","+i.b+","+i.c+","+i.d+","+i.e+","+i.f+")";n.setAttribute("transform",u);navigator.userAgent.match(/trident|edge/i)&&typeof r.style.strokeMiterlimit!="undefined"&&(r.style.strokeMiterlimit=r.style.strokeMiterlimit!=="3"?"3":"2");p&&p(t)}function g(n){var t,i,r;it&&((t=window.svgpublish,t&&t.enableZoomCtrl&&!n.ctrlKey)||t&&t.enableZoomShift&&!n.shiftKey||(n.preventDefault&&n.preventDefault(),n.returnValue=!1,i=n.originalEvent.wheelDelta?n.originalEvent.wheelDelta/360:n.originalEvent.detail/-9,r=Math.pow(1+a,i),l(r,n)))}function l(n,t){var o=t?h(w(t)):ft(),i=s(),u=o.matrixTransform(i.getCTM().inverse()),e=r.createSVGMatrix().translate(u.x,u.y).scale(n).translate(-u.x,-u.y);c(i,i.getCTM().multiply(e));f==null&&(f=i.getCTM().inverse());f=f.multiply(e.inverse())}function e(n,t){return{pageX:n,pageY:t}}function b(n,t){var i=n.pageX-t.pageX,r=n.pageY-t.pageY;return Math.sqrt(i*i+r*r)}function nt(n){var i,t,r,a;if(u){if(n.preventDefault&&n.preventDefault(),n.returnValue=!1,i=w(n),u==="pinch"&&(t=n.originalEvent.touches,t&&t.length===2)){var k=e(t[0].pageX,t[0].pageY),d=e(t[1].pageX,t[1].pageY),p=b(k,d);l(p/y,n);y=p;r=h(i).matrixTransform(f);c(s(),f.inverse().translate(r.x-o.x,r.y-o.y))}u==="down"&&b(i,v)>rt&&(u="pan");u==="pan"&&(a=h(i).matrixTransform(f),c(s(),f.inverse().translate(a.x-o.x,a.y-o.y)))}}function et(n){return n.which!==1?!1:(n.preventDefault&&n.preventDefault(),tt(n))}function tt(n){var t=n.originalEvent.touches,r,c,i;if(t&&t.length===2)r=e(t[0].pageX,t[0].pageY),c=e(t[1].pageX,t[1].pageY),y=b(r,c),u="pinch";else{if(i=window.svgpublish,i&&i.twoFingersTouch&&t){u=null;return}u="down"}f=s().getCTM().inverse();v=w(n);o=h(v).matrixTransform(f)}function ot(n){(u==="pan"||u==="pinch")&&n.stopPropagation&&n.stopPropagation();u=null}var it=1,a=.5,rt=3,u=null,o=null,v=null,f=null,y=null,p=null,r=i.svg,k=i.viewBox;d();n.contains(document,r)||(r=n(t).html(r).find("svg").get(0));navigator.userAgent.match(/trident|edge/i)&&(SVGElement.prototype.getBoundingClientRect=function(){var f=r.createSVGPoint(),n=this.getBBox(),e=this.getScreenCTM(),t,u,i;return f.x=n.x,f.y=n.y,t=f.matrixTransform(e),u=r.createSVGPoint(),u.x=n.x+n.width,u.y=n.y+n.height,i=u.matrixTransform(e),{left:t.x,top:t.y,right:i.x,bottom:i.y,width:i.x-t.x,height:i.y-t.y}});n(t).on("mousedown",et).on("mousemove",nt).on("touchstart",tt).on("touchmove",nt);if(n(t).get(0).addEventListener("click",ot,!0),navigator.userAgent.toLowerCase().indexOf("firefox")>=0)n(t).on("DOMMouseScroll",g);else n(t).on("mousewheel",g);return{zoomIn:function(){l(Math.pow(1+a,1))},zoomOut:function(){l(Math.pow(1+a,-1))},zoomReset:function(){d()},onViewChanged:function(n){p=n}}}}(jQuery);$(document).ready(function(){var n=window.svgpublish||{};n.shapes&&n.enableTooltips&&$.each(n.shapes,function(n,t){if(t.Comment){var i=$("#"+n);i.tooltip({container:"body",title:t.Comment})}})});